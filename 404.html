<!DOCTYPE html>
<html lang="es" data-base-path="">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Redireccionando…</title>
  <style>
    body {
      font-family: 'Lato', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background-color: #FAF7F2;
      color: #2F4F4F;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 2rem;
      text-align: center;
    }
    main {
      max-width: 480px;
      background: rgba(255, 255, 255, 0.85);
      border-radius: 1.5rem;
      padding: 2.5rem 2rem;
      box-shadow: 0 32px 60px -40px rgba(47, 79, 79, 0.65);
    }
    h1 {
      font-family: 'Playfair Display', serif;
      margin-bottom: 1rem;
    }
    p {
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }
    a {
      color: #2F4F4F;
      font-weight: 600;
      text-decoration: underline;
    }
  </style>
  <script>
    (function() {
      var storageKey = 'invitation-spa-redirect';
      try {
        if (window.sessionStorage) {
          window.sessionStorage.setItem(storageKey, window.location.href);
        }
      } catch (error) {
        /* Ignorar almacenamiento no disponible */
      }

      var basePath = document.documentElement.getAttribute('data-base-path') || '';
      if (basePath && basePath !== '/') {
        basePath = '/' + basePath.replace(/^\/+|\/+$/g, '');
      } else {
        var segments = window.location.pathname.split('/').filter(function(segment) { return segment; });
        basePath = segments.length > 1 ? '/' + segments[0] : '/';
      }

      if (basePath.slice(-1) !== '/') {
        basePath += '/';
      }

      var updateFallbackLink = function(target) {
        var link = document.getElementById('fallback-link');
        if (link && target) {
          link.setAttribute('href', target);
        }
      };

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() { updateFallbackLink(basePath); });
      } else {
        updateFallbackLink(basePath);
      }

      window.location.replace(basePath);
    })();
  </script>
</head>
<body>
  <main>
    <h1>Redireccionando…</h1>
    <p>Estamos llevando tu invitación al lugar correcto. Si la redirección no ocurre automáticamente, visita la <a id="fallback-link" href="/">portada</a>.</p>
  </main>
</body>
</html>
